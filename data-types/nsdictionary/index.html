<!DOCTYPE html>
<html lang='en'>
<head>
<title>NSDictionary - Ry’s Objective-C Tutorial - RyPress</title>
<meta charset='UTF-8'/>
<meta name='description' content="Like an NSSet, the
NSDictionary class represents an unordered collection of objects;
however, they associate each value with a key, which acts like a label for the
value. This is useful for modeling relationships between pairs of objects."/>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'/>
<link rel="icon" type="image/png" href="/media/favicon.png"/>
<link rel="stylesheet" href="/media/style.css"/>
<link rel="stylesheet" href="/media/pygments.css"/>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-37121774-2', 'auto');
    ga('send', 'pageview');
  </script>
</head>
<body>
<div id='page'>
<div id='banner'>
<a href='/tutorials/cocoa/index'>Ry&rsquo;s Cocoa Tutorial</a> is now only $10.
Happy Holidays! <span style='font-size: .8em'>(Offer extended to Jan 31st, 2016)</span>
</div>
<div id='content'>
<nav id='main-nav'>
<a href='/'><img src='/media/logo-small.png' width='120px' alt='RyPress - Quality Software Tutorials'/></a>
<ul>
<li><a href='/'>Tutorials</a></li>
<li><a href='/secure/purchases.php'>Purchases</a></li>
<li><a href='/about.php'>About</a></li>
</ul>
</nav>
<div class='divider'></div>
<table class="icon-and-text"><tr>
<td><a href="../index"><img src="../media/icons/index.png" width="40px" height="40px"></a></td>
<td><p>You’re
reading
<a href="../index"><em>Ry’s Objective-C Tutorial</em></a>
→
<a href="index"><em>Data Types</em></a></p></td>
</tr></table><div class="divider"></div>
<h1 id="nsdictionary">NSDictionary</h1>
<p>Like an <a href="nsset.html"><code>NSSet</code></a>, the
<code>NSDictionary</code> class represents an unordered collection of objects;
however, they associate each value with a key, which acts like a label for the
value. This is useful for modeling relationships between pairs of objects.</p>
<figure>
<img style="max-width: 500px" src="media/nsdictionary.png">
<figcaption>The basic collection classes of the Foundation
Framework</figcaption>
</figure>
<p><code>NSDictionary</code> is immutable, but the <a href="#nsmutabledictionary"><code>NSMutableDictionary</code></a> data structure
lets you dynamically add and remove entries as necessary.</p>
<h2 id="creating-dictionaries">Creating Dictionaries</h2>
<p>Immutable dictionaries can be defined using the literal <code>@{}</code>
syntax. But, like array literals, this was added relatively recently, so you
should also be aware of the <code>dictionaryWithObjectsAndKeys:</code> and
<code>dictionaryWithObjects:forKeys:</code> factory methods. All of these are
presented below.</p>
<pre><code class="c1">// Literal syntax</code>
<code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">inventory</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code>
<code class="p">};</code>
<code class="c1">// Values and keys as arguments</code>
<code class="n">inventory</code> <code class="o">=</code> <code class="p">[</code><code class="nb">NSDictionary</code> <code class="nf">dictionaryWithObjectsAndKeys:</code>
             <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code> <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code><code class="p">,</code>
             <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code> <code class="s">@&quot;Mercedes-Benz E350&quot;</code><code class="p">,</code>
             <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code> <code class="s">@&quot;BMW M3 Coupe&quot;</code><code class="p">,</code>
             <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code> <code class="s">@&quot;BMW X6&quot;</code><code class="p">,</code> <code class="kc">nil</code><code class="p">];</code>
<code class="c1">// Values and keys as arrays</code>
<code class="nb">NSArray</code> <code class="o">*</code><code class="n">models</code> <code class="o">=</code> <code class="p">@[</code><code class="s">@&quot;Mercedes-Benz SLK250&quot;</code><code class="p">,</code> <code class="s">@&quot;Mercedes-Benz E350&quot;</code><code class="p">,</code>
                    <code class="s">@&quot;BMW M3 Coupe&quot;</code><code class="p">,</code> <code class="s">@&quot;BMW X6&quot;</code><code class="p">];</code>
<code class="nb">NSArray</code> <code class="o">*</code><code class="n">stock</code> <code class="o">=</code> <code class="p">@[[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code>
                   <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code>
                   <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
                   <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">]];</code>
<code class="n">inventory</code> <code class="o">=</code> <code class="p">[</code><code class="nb">NSDictionary</code> <code class="nf">dictionaryWithObjects:</code><code class="n">stock</code> <code class="nf">forKeys:</code><code class="n">models</code><code class="p">];</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;%@&quot;</code><code class="p">,</code> <code class="n">inventory</code><code class="p">)</code><code class="o">;</code>
</pre>
<p>The <code>dictionaryWithObjectsAndKeys:</code> method treats its argument
list as value-key pairs, so every two parameters define a single entry. This
ordering is somewhat counterintuitive, so make sure that the value always comes
<em>before</em> its associated key. The
<code>dictionaryWithObjects:ForKeys:</code> method is a little bit more
straightforward, but you should be careful to ensure that the key array is the
same length as the value array.</p>
<p>For common programming tasks, you’ll probably never need to use
anything but an <code>NSString</code> as a key, but it’s worth noting
that any object that adopts the <code>NSCopying</code> protocol and implements
the <code>hash</code> and the <code>isEqual:</code> methods can be used as a
key. This is necessary because keys are copied when an entry is added to the
array. However, this is not true for values, which are strongly referenced
(just like set and array elements).</p>
<h2 id="accessing-values-and-keys">Accessing Values and Keys</h2>
<p>You can use the same subscripting syntax as arrays
(<code>someDict[key]</code>) to access the value for a particular key. The
<code>objectForKey:</code> method is the other common way to access values.</p>
<pre><code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">inventory</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code>
<code class="p">};</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;There are %@ X6&#39;s in stock&quot;</code><code class="p">,</code> <code class="n">inventory</code><code class="p">[</code><code class="s">@&quot;BMW X6&quot;</code><code class="p">])</code><code class="o">;</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;There are %@ E350&#39;s in stock&quot;</code><code class="p">,</code>
      <code class="p">[</code><code class="n">inventory</code> <code class="nf">objectForKey:</code><code class="s">@&quot;Mercedes-Benz E350&quot;</code><code class="p">]);</code>
</pre>
<p>Typically, you’ll want to access values from keys, as shown above;
however, it’s possible to do a reverse lookup to get a value’s
key(s) with the <code>allKeysForObject:</code> method. Note that this returns
an <em>array</em> because multiple keys can map to the same value (but not vice
versa). For example, the following extracts all of the keys with a value of
<code>0</code>.</p>
<pre><code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">inventory</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">0</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">0</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code>
<code class="p">};</code>
<code class="nb">NSArray</code> <code class="o">*</code><code class="n">outOfStock</code> <code class="o">=</code> <code class="p">[</code><code class="n">inventory</code> <code class="nf">allKeysForObject:</code>
                       <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">0</code><code class="p">]];</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;The following cars are currently out of stock: %@&quot;</code><code class="p">,</code>
      <code class="p">[</code><code class="n">outOfStock</code> <code class="nf">componentsJoinedByString:</code><code class="s">@&quot;, &quot;</code><code class="p">]);</code>
</pre>
<h2 id="enumerating-dictionaries">Enumerating Dictionaries</h2>
<p>As with sets and arrays, fast-enumeration is the most efficient way to
enumerate a dictionary, and it loops through the <em>keys</em> (not the
values). <code>NSDictionary</code> also defines a <code>count</code> method,
which returns the number of entries in the collection.</p>
<pre><code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">inventory</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code>
<code class="p">};</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;We currently have %ld models available&quot;</code><code class="p">,</code> <code class="p">[</code><code class="n">inventory</code> <code class="nf">count</code><code class="p">])</code><code class="o">;</code>
<code class="k">for</code> <code class="p">(</code><code class="kt">id</code> <code class="n">key</code> <code class="k">in</code> <code class="n">inventory</code><code class="p">)</code> <code class="p">{</code>
    <code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;There are %@ %@&#39;s in stock&quot;</code><code class="p">,</code> <code class="n">inventory</code><code class="p">[</code><code class="n">key</code><code class="p">],</code> <code class="n">key</code><code class="p">);</code>
<code class="p">}</code>
</pre>
<p>You can isolate a dictionary’s keys/values with the
<code>allKeys</code>/<code>allValues</code> methods, which return an
<code>NSArray</code> of each key/value in the collection, respectively. Note
that there is no guarantee that these methods will return keys and values in
the same order.</p>
<pre><code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;Models: %@&quot;</code><code class="p">,</code> <code class="p">[</code><code class="n">inventory</code> <code class="nf">allKeys</code><code class="p">])</code><code class="o">;</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;Stock: %@&quot;</code><code class="p">,</code> <code class="p">[</code><code class="n">inventory</code> <code class="nf">allValues</code><code class="p">])</code><code class="o">;</code>
</pre>
<p>For block-oriented developers,
<code>enumerateKeysAndObjectsUsingBlock:</code> offers yet another way to
enumerate entries. The block is called for each entry, and both the key and the
value are passed as arguments:</p>
<pre><code class="p">[</code><code class="n">inventory</code> <code class="nf">enumerateKeysAndObjectsUsingBlock:</code><code class="o">^</code><code class="p">(</code><code class="kt">id</code> <code class="n">key</code><code class="p">,</code> <code class="kt">id</code> <code class="n">obj</code><code class="p">,</code> <code class="kt">BOOL</code> <code class="o">*</code><code class="n">stop</code><code class="p">)</code> <code class="p">{</code>
    <code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;There are %@ %@&#39;s in stock&quot;</code><code class="p">,</code> <code class="n">obj</code><code class="p">,</code> <code class="n">key</code><code class="p">);</code>
<code class="p">}];</code>
</pre>
<h2 id="comparing-dictionaries">Comparing Dictionaries</h2>
<p>Comparing dictionaries works the same as comparing arrays. The
<code>isEqualToDictionary:</code> method returns <code>YES</code> when both
dictionaries contain the same key-value pairs:</p>
<pre><code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">warehouseInventory</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code>
<code class="p">};</code>
<code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">showroomInventory</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">13</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">22</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">19</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSNumber</code> <code class="nf">numberWithInt:</code><code class="mi">16</code><code class="p">],</code>
<code class="p">};</code>
<code class="k">if</code> <code class="p">([</code><code class="n">warehouseInventory</code> <code class="nf">isEqualToDictionary:</code><code class="n">showroomInventory</code><code class="p">])</code> <code class="p">{</code>
    <code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;Why are we storing so many cars in our showroom?&quot;</code><code class="p">);</code>
<code class="p">}</code>
</pre>
<h2 id="sorting-dictionary-keys">Sorting Dictionary Keys</h2>
<p>Dictionaries can’t be directly sorted into a new
<code>NSDictionary</code> instance, but it is possible to sort the
<em>keys</em> of the dictionary with
<code>keysSortedByValueUsingComparator:</code>, which accepts a block that
should return one of the <code>NSComparisonResult</code> enumerators described
in the <a href="nsarray.html#sorting-arrays">NSArray</a> module. The following
example sorts the models from most expensive to most affordable.</p>
<pre><code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">prices</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;42900.00&quot;</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;51000.00&quot;</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;62000.00&quot;</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;55015.00&quot;</code><code class="p">]</code>
<code class="p">};</code>
<code class="nb">NSArray</code> <code class="o">*</code><code class="n">sortedKeys</code> <code class="o">=</code> <code class="p">[</code><code class="n">prices</code> <code class="nf">keysSortedByValueUsingComparator:</code>
                       <code class="o">^</code><code class="nb">NSComparisonResult</code><code class="p">(</code><code class="kt">id</code> <code class="n">obj1</code><code class="p">,</code> <code class="kt">id</code> <code class="n">obj2</code><code class="p">)</code> <code class="p">{</code>
                           <code class="k">return</code> <code class="p">[</code><code class="n">obj2</code> <code class="nf">compare:</code><code class="n">obj1</code><code class="p">];</code>
                       <code class="p">}];</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;%@&quot;</code><code class="p">,</code> <code class="n">sortedKeys</code><code class="p">)</code><code class="o">;</code>
</pre>
<p>It’s important to note that the dictionary’s <em>values</em> are
passed to the block—not the keys themselves. Alternatively, you can
always manually sort the results of <code>allKeys</code> and
<code>allValues</code>.</p>
<h2 id="filtering-dictionary-keys">Filtering Dictionary Keys</h2>
<p>Similarly, you can’t directly filter a dictionary, but the aptly named
<code>keysOfEntriesPassingTest:</code> method lets you extract the keys passing
a particular test. The test is defined as a block that returns <code>YES</code>
if the current entry’s key should be included and <code>NO</code> if it
shouldn’t. The resulting keys are returned as an <code>NSSet</code>. For
example, the following snippet finds all of the cars that are under
$50,000.</p>
<pre><code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">prices</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;Mercedes-Benz SLK250&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;42900.00&quot;</code><code class="p">],</code>
    <code class="s">@&quot;Mercedes-Benz E350&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;51000.00&quot;</code><code class="p">],</code>
    <code class="s">@&quot;BMW M3 Coupe&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;62000.00&quot;</code><code class="p">],</code>
    <code class="s">@&quot;BMW X6&quot;</code> <code class="o">:</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;55015.00&quot;</code><code class="p">]</code>
<code class="p">};</code>
<code class="nb">NSDecimalNumber</code> <code class="o">*</code><code class="n">maximumPrice</code> <code class="o">=</code> <code class="p">[</code><code class="nb">NSDecimalNumber</code> <code class="nf">decimalNumberWithString:</code><code class="s">@&quot;50000.00&quot;</code><code class="p">];</code>
<code class="nb">NSSet</code> <code class="o">*</code><code class="n">under50k</code> <code class="o">=</code> <code class="p">[</code><code class="n">prices</code> <code class="nf">keysOfEntriesPassingTest:</code>
                   <code class="o">^</code><code class="kt">BOOL</code><code class="p">(</code><code class="kt">id</code> <code class="n">key</code><code class="p">,</code> <code class="kt">id</code> <code class="n">obj</code><code class="p">,</code> <code class="kt">BOOL</code> <code class="o">*</code><code class="n">stop</code><code class="p">)</code> <code class="p">{</code>
                       <code class="k">if</code> <code class="p">([</code><code class="n">obj</code> <code class="nf">compare:</code><code class="n">maximumPrice</code><code class="p">]</code> <code class="o">==</code> <code class="nb">NSOrderedAscending</code><code class="p">)</code> <code class="p">{</code>
                           <code class="k">return</code> <code class="kc">YES</code><code class="p">;</code>
                       <code class="p">}</code> <code class="k">else</code> <code class="p">{</code>
                           <code class="k">return</code> <code class="kc">NO</code><code class="p">;</code>
                       <code class="p">}</code>
                   <code class="p">}];</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;%@&quot;</code><code class="p">,</code> <code class="n">under50k</code><code class="p">)</code><code class="o">;</code>
</pre>
<h1 id="nsmutabledictionary">NSMutableDictionary</h1>
<p>The <code>NSMutableDictionary</code> class lets you add new key-value pairs
dynamically. Mutable dictionaries provide similar performance to mutable sets
when it comes to inserting and deleting entries, and remember that both of
these are a better choice than mutable arrays if you need to constantly alter
the collection.</p>
<p>Mutable collections in general lend themselves to representing system
states, and mutable dictionaries are no different. A common use case is to map
one set of objects to another set of objects. For example, an auto shop
application might need to assign broken cars to specific mechanics. One way of
modeling this is to treat cars as keys and mechanics as values. This
arrangement allows a single mechanic to be responsible for multiple cars, but
not vice versa.</p>
<h2 id="creating-mutable-dictionaries">Creating Mutable Dictionaries</h2>
<p>Mutable dictionaries can be created by calling any of the factory methods
defined by <code>NSDictionary</code> on the <code>NSMutableDictionary</code>
class. But, since many of these methods aren’t always the most intuitive
to work with, you might find it useful to convert a literal dictionary to a
mutable one using <code>dictionaryWithDictionary</code>:</p>
<pre><code class="nb">NSMutableDictionary</code> <code class="o">*</code><code class="n">jobs</code> <code class="o">=</code> <code class="p">[</code><code class="nb">NSMutableDictionary</code>
                             <code class="nf">dictionaryWithDictionary:</code><code class="p">@{</code>
                                 <code class="s">@&quot;Audi TT&quot;</code> <code class="o">:</code> <code class="s">@&quot;John&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi Quattro (Black)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Mary&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi Quattro (Silver)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi A7&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code>
                             <code class="p">}];</code>
<code class="nb">NSLog</code><code class="p">(</code><code class="s">@&quot;%@&quot;</code><code class="p">,</code> <code class="n">jobs</code><code class="p">)</code><code class="o">;</code>
</pre>
<h2 id="adding-and-removing-entries">Adding and Removing Entries</h2>
<p>The <code>setObject:forKey:</code> and <code>removeObjectForKey:</code>
methods are the significant additions contributed by
<code>NSMutableDictionary</code>. The former can be used to either replace
existing keys or add new ones to the collection. As an alternative, you can
assign values to keys using the dictionary subscripting syntax, also shown
below.</p>
<pre><code class="nb">NSMutableDictionary</code> <code class="o">*</code><code class="n">jobs</code> <code class="o">=</code> <code class="p">[</code><code class="nb">NSMutableDictionary</code>
                             <code class="nf">dictionaryWithDictionary:</code><code class="p">@{</code>
                                 <code class="s">@&quot;Audi TT&quot;</code> <code class="o">:</code> <code class="s">@&quot;John&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi Quattro (Black)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Mary&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi Quattro (Silver)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi A7&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code>
                             <code class="p">}];</code>
<code class="c1">// Transfer an existing job to Mary</code>
<code class="p">[</code><code class="n">jobs</code> <code class="nf">setObject:</code><code class="s">@&quot;Mary&quot;</code> <code class="nf">forKey:</code><code class="s">@&quot;Audi TT&quot;</code><code class="p">];</code>
<code class="c1">// Finish a job</code>
<code class="p">[</code><code class="n">jobs</code> <code class="nf">removeObjectForKey:</code><code class="s">@&quot;Audi A7&quot;</code><code class="p">];</code>
<code class="c1">// Add a new job</code>
<code class="n">jobs</code><code class="p">[</code><code class="s">@&quot;Audi R8 GT&quot;</code><code class="p">]</code> <code class="o">=</code> <code class="s">@&quot;Jack&quot;</code><code class="p">;</code>
</pre>
<h2 id="combining-dictionaries">Combining Dictionaries</h2>
<p>Mutable dictionaries can be expanded by adding the contents of another
dictionary to its collection via the <code>addEntriesFromDictionary:</code>
method. This can be used, for example, to combine jobs from two auto shop
locations:</p>
<pre><code class="nb">NSMutableDictionary</code> <code class="o">*</code><code class="n">jobs</code> <code class="o">=</code> <code class="p">[</code><code class="nb">NSMutableDictionary</code>
                             <code class="nf">dictionaryWithDictionary:</code><code class="p">@{</code>
                                 <code class="s">@&quot;Audi TT&quot;</code> <code class="o">:</code> <code class="s">@&quot;John&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi Quattro (Black)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Mary&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi Quattro (Silver)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code><code class="p">,</code>
                                 <code class="s">@&quot;Audi A7&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code>
                             <code class="p">}];</code>
<code class="nb">NSDictionary</code> <code class="o">*</code><code class="n">bakerStreetJobs</code> <code class="o">=</code> <code class="p">@{</code>
    <code class="s">@&quot;BMW 640i&quot;</code> <code class="o">:</code> <code class="s">@&quot;Dick&quot;</code><code class="p">,</code>
    <code class="s">@&quot;BMW X5&quot;</code> <code class="o">:</code> <code class="s">@&quot;Brad&quot;</code>
<code class="p">};</code>
<code class="p">[</code><code class="n">jobs</code> <code class="nf">addEntriesFromDictionary:</code><code class="n">bakerStreetJobs</code><code class="p">];</code>
</pre>
<p>This method also presents another option for creating mutable
dictionaries:</p>
<pre><code class="c1">// Create an empty mutable dictionary</code>
<code class="nb">NSMutableDictionary</code> <code class="o">*</code><code class="n">jobs</code> <code class="o">=</code> <code class="p">[</code><code class="n">NSMutableDictionary</code> <code class="nf">dictionary</code><code class="p">];</code>
<code class="c1">// Populate it with initial key-value pairs</code>
<code class="p">[</code><code class="n">jobs</code> <code class="nf">addEntriesFromDictionary:</code><code class="p">@{</code>
    <code class="s">@&quot;Audi TT&quot;</code> <code class="o">:</code> <code class="s">@&quot;John&quot;</code><code class="p">,</code>
    <code class="s">@&quot;Audi Quattro (Black)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Mary&quot;</code><code class="p">,</code>
    <code class="s">@&quot;Audi Quattro (Silver)&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code><code class="p">,</code>
    <code class="s">@&quot;Audi A7&quot;</code> <code class="o">:</code> <code class="s">@&quot;Bill&quot;</code>
<code class="p">}];</code>
</pre>
<h2 id="enumeration-considerations">Enumeration Considerations</h2>
<p>Dictionaries should not be mutated while you’re iterating over them.
Please see the <a href="nsset.html#enumeration-considerations">Enumeration
Considerations</a> section of the <em>NSSet</em> module for details.</p>
<p>Depending on how you need to alter the collection, you might be able to use
the <code>allKeys</code> or <code>allValues</code> methods to create snapshots
of just the keys or values. If those aren’t sufficient you should use the
<code>dictionaryWithDictionary:</code> class method to create a shallow copy of
the entire dictionary.</p>
<div class="divider" style="margin-top: 2em; margin-bottom: 1.3em;"></div><table class="icon-and-text advert"><tr>
<td><a href="http://rypress.com/tutorials/cocoa"><img src="../media/advert-image.png" width="120px" height="165px" class="cover"></a></td>
<td><p id="advert-text">Be sure to check out <a href="http://rypress.com/tutorials/cocoa">Ry’s Cocoa Tutorial</a>. This
brand new guide is a complete walkthrough of Mac App development, and it
leverages all of the Objective-C skills that we just discussed. <a href="http://rypress.com/tutorials/cocoa">Learn more ›</a></p></td>
</tr></table>
<div id='mailing-list'>
<div class='divider' style='margin: 1.8em -22px;'></div>
<h3>Mailing List</h3>
<p>Sign up for my low-volume mailing list to find out when new content is
released. Next up is a comprehensive <a href='https://developer.apple.com/swift/'>Swift</a> tutorial planned for late
January.</p>
<form id='mailing-list-form' action='/secure/mailing-list/request-add' method='get'>
<label>
<div class='label'>Email Address:</div>
<div class='input'>
<input name='email' style='width: 200px;' type='email'/>
</div>
</label>
<input id='mailing-list-button' class='button' style='margin-top: .5em;' type='submit' value='Subscribe'/>
</form>
<div style='clear: both'></div>
<p class='fine-print'>You&rsquo;ll only receive emails when new tutorials are
released, and your contact information will never be shared with third
parties. <a href='/secure/mailing-list/unsubscribe'>Click here</a> to
unsubscribe.</p>
</div>
<div class='divider'></div>
<footer id='footer' class='fine-print'>
<ul>
<li><a href='/licensing.php'>&copy; 2012-2014</a></li>
<li><a href='/'>RyPress.com</a></li>
<li>
<a href='/licensing.php'>All Rights Reserved</a>
</li>
<li>
<a href='/tos.php'>Terms&nbsp;of&nbsp;Service</a>
</li>
<li>
<a href='/privacy.php'>Privacy Policy</a>
</li>
</ul>
</footer>
</div>  
</div>  
</body>
</html>